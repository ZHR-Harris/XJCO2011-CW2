{% extends 'base.html' %}
{% block title %}
<title>Vmarto Product Page</title>
{% endblock %}

{% block content %}
<div class="product-essential container">
    <div class="row product-view">

        <form action="#" method="post" id="product_addtocart_form">
            <!--End For version 1, 2, 6 -->
            <!-- For version 3 -->
            <div class="product-img-box col-lg-5 col-sm-5 col-xs-12">
                <div class="new-label new-top-left">Hot</div>
                <div class="sale-label sale-top-left">-15%</div>
                <div class="product-image">
                    <div class="product-full"> <img id="product-zoom" src={{ url_for('static',
                            filename=product.picture_path ) }} data-zoom-image={{ url_for('static',
                            filename=product.picture_path ) }} alt="product-image" />
                    </div>
                    <!-- end: more-images -->
                    <div class="more-views">
                        <div class="slider-items-products">
                            <div id="gallery_01" class="product-flexslider hidden-buttons product-img-thumb">
                                <div class="slider-items slider-width-col4 block-content">
                                    {% for product in product_more %}
                                    <div class="more-views-items"> <a href="#"
                                            data-image="{{url_for('static', filename=product.picture_path)}}"
                                            data-zoom-image="{{url_for('static', filename=product.picture_path)}}"> <img
                                                id="product-zoom0"
                                                src="{{url_for('static', filename=product.picture_path)}}"
                                                alt="product-image" /> </a></div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--End For version 1,2,6-->
            <!-- For version 3 -->
            <div class="product-shop col-lg- col-sm-7 col-xs-12">
                <div class="product-name">
                    <h1>{{product.name}} </h1>
                </div>
                <div class="ratings">
                    <div class="rating-box">
                        <div style="width:60%" class="rating"></div>
                    </div>
                    <p class="rating-links"> <a href="#">{{ review_num + 2 }} Review</a> <span class="separator">|</span> <a href="#">Add
                            Your Review</a> </p>
                </div>
                <div class="price-block">
                    <div class="price-box">
                        <p class="availability in-stock"><span>In Stock</span></p>
                        <p class="special-price"> <span class="price-label">Special Price</span> <span
                                id="product-price-48" class="price"> ${{ product.price }} </span> </p>


                    </div>
                </div>
                <div class="add-to-box">
                    <div class="add-to-cart">
                        <div class="pull-left">
                            <div class="custom pull-left">
                                <button
                                    onclick="var result = document.getElementById('qty'); var qty = result.value; if( !isNaN( qty ) &amp;&amp; qty > 0 ) result.value--;return false;"
                                    class="reduced items-count" type="button"><i class="fa fa-minus">&nbsp;</i></button>
                                <input type="text" class="input-text qty" title="Qty" value="1" maxlength="30" id="qty"
                                    name="qty">
                                <button
                                    onclick="var result = document.getElementById('qty'); var qty = result.value; if( !isNaN( qty )) result.value++;return false;"
                                    class="increase items-count" type="button"><i class="fa fa-plus">&nbsp;</i></button>
                            </div>
                        </div>
                        <button class="button btn-cart detail_add" title="Add to Cart"
                            type="button" data-id={{ product.id }} >Add to Cart</button>
                    </div>

                </div>

                <ul class="shipping-pro">
                    <li>Free Wordwide Shipping</li>
                    <li>30 Days Return</li>
                    <li>Member Discount</li>
                </ul>
            </div>
            <!--product-shop-->
            <!--Detail page static block for version 3-->
        </form>
    </div>
</div>

<!-- BEGIN Main Container -->
<div class="main-container col1-layout wow bounceInUp animated">
    <div class="main container">
        <div class="col-main row">
            <!-- Endif Next Previous Product -->
            <div class="product-view wow bounceInUp animated" itemscope="" itemtype="http://schema.org/Product"
                itemid="#product_base">
                <div id="messages_product_view"></div>
                <!--product-next-prev-->

                <!--product-essential-->
                <div class="product-collateral">
                    <ul id="product-detail-tab" class="nav nav-tabs product-tabs">
                        <li class="active"> <a href="#product_tabs_description" data-toggle="tab"> Product Description
                            </a> </li>
                        <li> <a href="#reviews_tabs" data-toggle="tab">Reviews</a> </li>
                    </ul>
                    <div id="productTabContent" class="tab-content">
                        <div class="tab-pane fade in active" id="product_tabs_description">
                            <div class="std">

                                <p>{{ product.description }}</p>

                                <ul>
                                    <li><strong>Mauris vel tellus non nunc mattis lobortis</strong></li>
                                    <li><strong>Suspendisse aliquet urna pretium eros convallis</strong></li>
                                    <li>Vestibulum ante ipsum <strong>primis in faucibus</strong></li>
                                    <li><strong>Fusce ultricies massa massa</strong></li>
                                </ul>
                            </div>
                        </div>
                        <div class="tab-pane fade in" id="reviews_tabs">
                            <div class="woocommerce-Reviews">
                                <div>
                                    <h2 class="woocommerce-Reviews-title">{{ review_num + 2 }} reviews for <span>{{ product.name }}</span></h2>
                                    <ol class="commentlist">
                                        <li class="comment">
                                            <div>
                                                <img alt="" src={{ url_for('static', filename="images/member1.png" ) }}
                                                    class="avatar avatar-60 photo">
                                                <div class="comment-text">
                                                    <div class="ratings">
                                                        <div class="rating-box">
                                                            <div style="width:100%" class="rating"></div>
                                                        </div>

                                                    </div>
                                                    <p class="meta">
                                                        <strong>John Doe</strong>
                                                        <span>–</span> April 19, 2018
                                                    </p>
                                                    <div class="description">
                                                        <p>Vivamus magna justo, lacinia eget consectetur sed, convallis
                                                            at tellus. Nulla quis lorem ut libero malesuada feugiat.
                                                            Proin eget tortor risus. Donec rutrum congue leo eget
                                                            malesuada. Lorem ipsum dolor sit amet, consectetur
                                                            adipiscing elit.</p>
                                                        <p>Donec sollicitudin molestie malesuada. Vivamus suscipit
                                                            tortor eget felis porttitor volutpat. Lorem ipsum dolor sit
                                                            amet, consectetur adipiscing elit. Nulla quis lorem ut
                                                            libero malesuada feugiat. Vivamus magna justo, lacinia eget
                                                            consectetur sed, convallis at tellus.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </li><!-- #comment-## -->
                                        <li class="comment">
                                            <div>
                                                <img alt="" src={{ url_for('static', filename="images/member2.png" ) }}
                                                    class="avatar avatar-60 photo">
                                                <div class="comment-text">
                                                    <div class="ratings">
                                                        <div class="rating-box">
                                                            <div style="width:100%" class="rating"></div>
                                                        </div>

                                                    </div>
                                                    <p class="meta">
                                                        <strong>Stephen Smith</strong> <span>–</span> June 02, 2018
                                                    </p>
                                                    <div class="description">
                                                        <p>Donec rutrum congue leo eget malesuada. Lorem ipsum dolor sit
                                                            amet, consectetur adipiscing elit.</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </li><!-- #comment-## -->
                                        {% for review in reviews %}
                                            <li class="comment">
                                                <div>
                                                    <img alt="" src={{ url_for('static', filename=review.author.profile[0].photo_path ) }} class="avatar avatar-60 photo">
                                                    <div class="comment-text">
                                                        <div class="ratings">
                                                            <div class="rating-box">
                                                                <div style="width:{{ review.rating *100 / 5 }}%" class="rating"></div>
                                                            </div>

                                                        </div>
                                                        <p class="meta">
                                                            <strong>{{review.author.username}}</strong> <span>–</span> {{review.create_time}}
                                                        </p>
                                                        <div class="description">
                                                            <p>{{ review.content }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </li><!-- #comment-## -->
                                        {% endfor %}
                                    </ol>
                                </div>
                                {% if current_user.is_authenticated %}
                                <div>
                                    <div>
                                        <div class="comment-respond">
                                            <span class="comment-reply-title">Add a review </span>
                                            <form action="#" method="post" class="comment-form" novalidate>
                                                <p class="comment-notes"><span id="email-notes">Your email address will
                                                        not be published.</span> Required fields are marked <span
                                                        class="required">*</span></p>
                                                <div class="comment-form-rating">
                                                    <label id="rating">Your rating</label>
                                                    <p class="stars">
                                                        <span>
                                                            <a class="star-1 s">1</a>
                                                            <a class="star-2 s">2</a>
                                                            <a class="star-3 s">3</a>
                                                            <a class="star-4 s">4</a>
                                                            <a class="star-5 s">5</a>
                                                        </span>
                                                    </p>
                                                </div>
                                                <p class="comment-form-comment">
                                                    <label>Your review <span class="required">*</span></label>
                                                    <textarea id="comment" name="comment" cols="45" rows="8"
                                                        required></textarea>
                                                </p>
                                                <p class="form-submit">
                                                    <input name="submit" type="submit" id="add_review" class="submit"
                                                        value="Submit" data-product-id = {{ product.id }}>
                                                </p>
                                            </form>
                                        </div><!-- #respond -->
                                    </div>
                                </div>
                                {% endif %}
                                <div class="clear"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- menu Slider -->
    <section class="best-pro" id="menu">
        <div class="slider-items-products container">
            <div class="new_title no-margin">
                <h2>Other products</h2>
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy habitant morbi.</p>
            </div>
            <div id="best-seller" class="product-flexslider hidden-buttons">
                <div class="slider-items slider-width-col4 products-grid">
                    {% for product in products %}
                    <!-- Item -->
                    <div class="item">
                        <div class="item-inner">
                            <div class="item-img">
                                <div class="item-img-info"><a
                                        href="{{ url_for('productdetail', product_id = product.id) }}"
                                        title="Fresh Organic Mustard Leaf " class="product-image"><img
                                            src="{{url_for('static', filename = product.picture_path)}}"
                                            alt="sample dish"></a> </div>
                                <div class="add_cart">
                                    <button class="button btn-cart" type="button" onclick="add_to_cart($(this))" value={{ product.id }}><span>Add to Cart</span></button>
                                </div>

                            </div>
                            <div class="item-info">
                                <div class="info-inner">
                                    <div class="item-title"><a href="product-detail.html"
                                            title="Fresh Organic Mustard Leaf">{{ product.name }} </a> </div>
                                    <div class="rating">
                                        <div class="ratings">
                                            <div class="rating-box">
                                                <div class="rating" style="width:80%"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="item-content">
                                        <div class="item-price">
                                            <div class="price-box"><span class="regular-price"><span class="price">${{
                                                        product.price }}</span> </span> </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Item -->
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>


    <!--product-collateral-->

    <!--product-view-->
</div>


{% endblock %}

{% block JS %}
    <script>
        function add_to_cart(data) {
            var id = data.attr('value');
            console.log(data.attr('value'));
            $.ajax({
                url: '/addcart/',
                type: 'POST',
                data: { product_id: id },
                success: function () {
                    location.reload();
                    {#console.log(222);#}
                }
            });
        }
    </script>
    <script type="text/javascript" src={{ url_for('static',filename="js/cloud-zoom.js" ) }}></script>
    <script type="text/javascript" src={{ url_for('static',filename="js/jquery.flexslider.js" ) }}></script>
<!-- JavaScript -->
{% endblock %}